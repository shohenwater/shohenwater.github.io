
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://shohenwater.github.io/theme/stylesheet/style.min.css">


    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
          href="https://shohenwater.github.io/theme/pygments/github.min.css">


  <link rel="stylesheet" type="text/css" href="https://shohenwater.github.io/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://shohenwater.github.io/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://shohenwater.github.io/theme/font-awesome/css/solid.css">







<meta name="author" content="Scott Hohenwater" />
<meta name="description" content="I found this data set on kaggle at https://www.kaggle.com/andrewmvd/heart-failure-clinical-data. It countains data on 299 patients with heart failure with 12 features that could possibly be used to predict mortality by heart failure. Initializing the data. import pandas as pd import numpy as np import matplotlib …" />
<meta name="keywords" content="">


<meta property="og:site_name" content="Scott Hohenwater's Data Blog"/>
<meta property="og:title" content="Heart Failure Analysis"/>
<meta property="og:description" content="I found this data set on kaggle at https://www.kaggle.com/andrewmvd/heart-failure-clinical-data. It countains data on 299 patients with heart failure with 12 features that could possibly be used to predict mortality by heart failure. Initializing the data. import pandas as pd import numpy as np import matplotlib …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://shohenwater.github.io/heart-failure-analysis.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2020-08-24 00:00:00-05:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://shohenwater.github.io/author/scott-hohenwater.html">
<meta property="article:section" content="misc"/>
<meta property="og:image" content="">

  <title>Scott Hohenwater's Data Blog &ndash; Heart Failure Analysis</title>

</head>
<body class="light-theme">
  <aside>
    <div>
      <a href="https://shohenwater.github.io">
        <img src="https://shohenwater.github.io/theme/img/profile.png" alt="" title="">
      </a>

      <h1>
        <a href="https://shohenwater.github.io"></a>
      </h1>



      <nav>
        <ul class="list">


              <li>
                <a target="_self"
                   href="https://shohenwater.github.io/pages/about.html#about">
                  About
                </a>
              </li>

        </ul>
      </nav>

      <ul class="social">
          <li>
            <a  class="sc-LinkedIn" href="https://www.linkedin.com/in/scotthohenwater/" target="_blank">
              <i class="fab fa-LinkedIn"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>


<article class="single">
  <header>
      
    <h1 id="heart-failure-analysis">Heart Failure Analysis</h1>
    <p>
      Posted on Mon 24 August 2020 in <a href="https://shohenwater.github.io/category/misc.html">misc</a>

    </p>
  </header>


  <div>
    <p>I found this data set on kaggle at https://www.kaggle.com/andrewmvd/heart-failure-clinical-data. It countains data on 299 patients with heart failure with 12 features that could possibly be used to predict mortality by heart failure.</p>
<p>Initializing the data.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C:/Users/Scott/Downloads/heart_failure/heart_failure_clinical_records_dataset.csv&#39;</span><span class="p">)</span>
</pre></div>


<p>A little cleaning of the data.</p>
<div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="n">booleans</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Anaemia&#39;</span><span class="p">,</span><span class="s1">&#39;Diabetes&#39;</span><span class="p">,</span><span class="s1">&#39;High blood pressure&#39;</span><span class="p">,</span><span class="s1">&#39;Smoking&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">booleans</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;bool&#39;</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Sex&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Sex&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="s1">&#39;M&#39;</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>


<div class="highlight"><pre><span></span>    <span class="n">Age</span>  <span class="n">Anaemia</span>  <span class="n">Creatinine</span> <span class="n">phosphokinase</span>  <span class="n">Diabetes</span>  <span class="n">Ejection</span> <span class="n">fraction</span>  <span class="err">\</span>
<span class="mi">0</span>  <span class="mi">75</span><span class="p">.</span><span class="mi">0</span>    <span class="k">False</span>                       <span class="mi">582</span>     <span class="k">False</span>                 <span class="mi">20</span>   
<span class="mi">1</span>  <span class="mi">55</span><span class="p">.</span><span class="mi">0</span>    <span class="k">False</span>                      <span class="mi">7861</span>     <span class="k">False</span>                 <span class="mi">38</span>   
<span class="mi">2</span>  <span class="mi">65</span><span class="p">.</span><span class="mi">0</span>    <span class="k">False</span>                       <span class="mi">146</span>     <span class="k">False</span>                 <span class="mi">20</span>   
<span class="mi">3</span>  <span class="mi">50</span><span class="p">.</span><span class="mi">0</span>     <span class="k">True</span>                       <span class="mi">111</span>     <span class="k">False</span>                 <span class="mi">20</span>   
<span class="mi">4</span>  <span class="mi">65</span><span class="p">.</span><span class="mi">0</span>     <span class="k">True</span>                       <span class="mi">160</span>      <span class="k">True</span>                 <span class="mi">20</span>

   <span class="n">High</span> <span class="n">blood</span> <span class="n">pressure</span>  <span class="n">Platelets</span>  <span class="n">Serum</span> <span class="n">creatinine</span>  <span class="n">Serum</span> <span class="n">sodium</span> <span class="n">Sex</span>  <span class="err">\</span>
<span class="mi">0</span>                 <span class="k">True</span>  <span class="mi">265000</span><span class="p">.</span><span class="mi">00</span>               <span class="mi">1</span><span class="p">.</span><span class="mi">9</span>           <span class="mi">130</span>   <span class="n">M</span>   
<span class="mi">1</span>                <span class="k">False</span>  <span class="mi">263358</span><span class="p">.</span><span class="mi">03</span>               <span class="mi">1</span><span class="p">.</span><span class="mi">1</span>           <span class="mi">136</span>   <span class="n">M</span>   
<span class="mi">2</span>                <span class="k">False</span>  <span class="mi">162000</span><span class="p">.</span><span class="mi">00</span>               <span class="mi">1</span><span class="p">.</span><span class="mi">3</span>           <span class="mi">129</span>   <span class="n">M</span>   
<span class="mi">3</span>                <span class="k">False</span>  <span class="mi">210000</span><span class="p">.</span><span class="mi">00</span>               <span class="mi">1</span><span class="p">.</span><span class="mi">9</span>           <span class="mi">137</span>   <span class="n">M</span>   
<span class="mi">4</span>                <span class="k">False</span>  <span class="mi">327000</span><span class="p">.</span><span class="mi">00</span>               <span class="mi">2</span><span class="p">.</span><span class="mi">7</span>           <span class="mi">116</span>   <span class="n">F</span>

   <span class="n">Smoking</span>  <span class="n">Time</span>  <span class="n">Death</span> <span class="n">event</span>  
<span class="mi">0</span>    <span class="k">False</span>     <span class="mi">4</span>            <span class="mi">1</span>  
<span class="mi">1</span>    <span class="k">False</span>     <span class="mi">6</span>            <span class="mi">1</span>  
<span class="mi">2</span>     <span class="k">True</span>     <span class="mi">7</span>            <span class="mi">1</span>  
<span class="mi">3</span>    <span class="k">False</span>     <span class="mi">7</span>            <span class="mi">1</span>  
<span class="mi">4</span>    <span class="k">False</span>     <span class="mi">8</span>            <span class="mi">1</span>
</pre></div>


<p>There is a combination of binomial and numeric data to work with. The first thing I wanted to look at was the distribution of ages of those who died. From reading the background information of the data set, I learned that they only counted deaths that happened before the patients follow up visit. The time between seeing the doctor is the time column.</p>
<div class="highlight"><pre><span></span><span class="n">dead</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Death event&#39;</span><span class="p">]</span><span class="o">==</span> <span class="bp">True</span>
<span class="n">alive</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Death event&#39;</span><span class="p">]</span><span class="o">==</span> <span class="bp">False</span>
<span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">][</span><span class="n">dead</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="p">.</span><span class="n">axes</span><span class="p">.</span><span class="n">_subplots</span><span class="p">.</span><span class="n">AxesSubplot</span> <span class="k">at</span> <span class="mi">0</span><span class="n">x154d29e70f0</span><span class="o">&gt;</span>
</pre></div>


<p><img alt="png" src="heart disease files/output_6_1.png"></p>
<p>The data seems to be normally distributed with some right skew. I am curious as to how many of the 299 patients in the data set were involved in this graph. </p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">dead</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="mi">96</span>
</pre></div>


<p>So 96 of the 299 patients died before there follow up visit. Another way I wanted to look at the distribution of death is by looking at the percentage of death per age.</p>
<div class="highlight"><pre><span></span><span class="n">mortality_5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="k">for</span> <span class="n">age</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="mi">90</span><span class="p">):</span>
    <span class="n">mortality_5</span><span class="p">[</span><span class="n">age</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Death event&#39;</span><span class="p">][(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="n">age</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">age</span><span class="o">+</span><span class="mi">5</span><span class="p">)]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">mortality_5</span> <span class="o">=</span> <span class="n">mortality_5</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mortality_5</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;5 Year Mortality&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age Plus 5 Years&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Percentage&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;5 Year Mortality Rate&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="png" src="heart disease files/output_10_0.png"></p>
<p>I chose to use the mortality rate for five years at a time to smooth out the data and fill in the gaps where no or a small number of patients were of that age. The point at 50 then is the mortality rate before their follow up appointment of those aged 50 through 55. From this graph you can see that as the age of the patient goes up the likelihood of not making the follow up appointment is greater.</p>
<p>One thing to check is how well the doctors were able to see how their patients were doing. To do this I want to look at the distribution of follow up visit length for those who were able to make it to their follow up visit against the length for those who did not.</p>
<div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">][</span><span class="n">dead</span><span class="p">],</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">][</span><span class="n">alive</span><span class="p">],</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="png" src="heart disease files/output_13_0.png"></p>
<p>You can see that the doctors were able to do a pretty good job having the people who ended up passing having the shortest time to follow up. The tough part is that the longer time to follow up the more time there is for an fatal incident to occur. That could be why the distribution of follow up visit delay for those who passed makes an increase as time gets larger to look possibly bimodal.</p>
<p>Since it appears that the doctors were able to identify the patients in the greatest of help, it is a good idea to try to reverse engineer what caused the doctors to have the patients come back for a follow up in shorter time. </p>
<div class="highlight"><pre><span></span><span class="n">short_follow</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">50</span>
<span class="n">long_follow</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">50</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Creatinine phosphokinase&#39;</span><span class="p">][</span><span class="n">short_follow</span><span class="p">],</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Creatinine phosphokinase&#39;</span><span class="p">][</span><span class="n">long_follow</span><span class="p">],</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Creatnine Phosphokinase&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Percent&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;mcg/L&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Platelets&#39;</span><span class="p">][</span><span class="n">short_follow</span><span class="p">],</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Platelets&#39;</span><span class="p">][</span><span class="n">long_follow</span><span class="p">],</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Platelets&#39;</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Kiloplatelets/mL&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Percent&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Serum creatinine&#39;</span><span class="p">][</span><span class="n">short_follow</span><span class="p">],</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Serum creatinine&#39;</span><span class="p">][</span><span class="n">long_follow</span><span class="p">],</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Serum Creatinine&#39;</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Percent&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;mg/dL&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Serum sodium&#39;</span><span class="p">][</span><span class="n">short_follow</span><span class="p">],</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Serum sodium&#39;</span><span class="p">][</span><span class="n">long_follow</span><span class="p">],</span> <span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Serum Sodium&#39;</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Percent&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;mEq/L&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">][</span><span class="n">short_follow</span><span class="p">],</span><span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">][</span><span class="n">long_follow</span><span class="p">],</span><span class="n">density</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">histtype</span><span class="o">=</span><span class="s1">&#39;step&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Ejection Fraction&#39;</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Percent&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Percentage Blood Ejected per Heart Contraction&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Short and Long Follow Up Distributions&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Short&#39;</span><span class="p">,</span> <span class="s1">&#39;Long&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="png" src="heart disease files/output_16_0.png"></p>
<p>There appears to be no extreme differences of distribution immediatly obvious from these graphs. This makes sense because this dataset contains all people who have already had heart issues and are making follow up appointments. I would expect larger differences if the data set also contained people who had average heart health.</p>
<p>Next, I want to check the correlations between the different factors.</p>
<div class="highlight"><pre><span></span><span class="n">df_corr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">,</span><span class="s1">&#39;Platelets&#39;</span><span class="p">,</span><span class="s1">&#39;Creatinine phosphokinase&#39;</span><span class="p">,</span><span class="s1">&#39;Serum creatinine&#39;</span><span class="p">,</span><span class="s1">&#39;Serum sodium&#39;</span><span class="p">,</span><span class="s1">&#39;Anaemia&#39;</span><span class="p">,</span><span class="s1">&#39;Smoking&#39;</span><span class="p">,</span><span class="s1">&#39;Diabetes&#39;</span><span class="p">,</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Death event&#39;</span><span class="p">])</span>
<span class="n">corrmatrix</span><span class="o">=</span> <span class="n">df_corr</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corrmatrix</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Correlation Heat Map&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">corrmatrix</span><span class="p">[[</span><span class="s1">&#39;Death event&#39;</span><span class="p">,</span><span class="s1">&#39;Time&#39;</span><span class="p">]])</span>
</pre></div>


<p><img alt="png" src="heart disease files/output_19_0.png"></p>
<div class="highlight"><pre><span></span>                          <span class="n">Death</span> <span class="n">event</span>      <span class="n">Time</span>
<span class="n">Age</span>                          <span class="mi">0</span><span class="p">.</span><span class="mi">253729</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">224068</span>
<span class="n">Ejection</span> <span class="n">fraction</span>           <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">268603</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">041729</span>
<span class="n">Platelets</span>                   <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">049139</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">010514</span>
<span class="n">Creatinine</span> <span class="n">phosphokinase</span>     <span class="mi">0</span><span class="p">.</span><span class="mi">062728</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">009346</span>
<span class="n">Serum</span> <span class="n">creatinine</span>             <span class="mi">0</span><span class="p">.</span><span class="mi">294278</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">149315</span>
<span class="n">Serum</span> <span class="n">sodium</span>                <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">195204</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">087640</span>
<span class="n">Anaemia</span>                      <span class="mi">0</span><span class="p">.</span><span class="mi">066270</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">141414</span>
<span class="n">Smoking</span>                     <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">012623</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">022839</span>
<span class="n">Diabetes</span>                    <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">001943</span>  <span class="mi">0</span><span class="p">.</span><span class="mi">033726</span>
<span class="n">Time</span>                        <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">526964</span>  <span class="mi">1</span><span class="p">.</span><span class="mi">000000</span>
<span class="n">Death</span> <span class="n">event</span>                  <span class="mi">1</span><span class="p">.</span><span class="mi">000000</span> <span class="o">-</span><span class="mi">0</span><span class="p">.</span><span class="mi">526964</span>
</pre></div>


<p>I wanted to specifically focus in on the correlations of death and time till follow up appointment. The strongest correlation with death is the time till the next follow up appointment. The correlation of -0.53 shows that the information learned from the previous histogram is correct. The more time between appointments the lesser probability of death.</p>
<p>From this table there are some factors that I would more specifically like to look in to. Namely the serum creatinine, ejection fraction, serum sodium, and time columns.</p>
<div class="highlight"><pre><span></span><span class="n">interest</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Serum creatinine&#39;</span><span class="p">,</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">,</span><span class="s1">&#39;Serum sodium&#39;</span><span class="p">,</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span>
<span class="n">Upper</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">interest</span><span class="p">)</span>
<span class="n">Lower</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">interest</span><span class="p">)</span>
<span class="n">Outer</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">interest</span><span class="p">)</span>
<span class="n">Inner</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">interest</span><span class="p">)</span>

<span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">interest</span><span class="p">:</span>
    <span class="n">Upper</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Death event&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">&gt;=</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">Lower</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Death event&#39;</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">Outer</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Death event&#39;</span><span class="p">][(</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">],</span><span class="mi">25</span><span class="p">))</span><span class="o">|</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">],</span><span class="mi">75</span><span class="p">))]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">Inner</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Death event&#39;</span><span class="p">][(</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">],</span><span class="mi">25</span><span class="p">))</span><span class="o">&amp;</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">]</span><span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">sub</span><span class="p">],</span><span class="mi">75</span><span class="p">))]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">for</span> <span class="n">bit</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Upper</span><span class="p">,</span> <span class="n">Lower</span><span class="p">,</span> <span class="n">Outer</span><span class="p">,</span> <span class="n">Inner</span><span class="p">]:</span>
    <span class="n">bit</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Alive&#39;</span><span class="p">,</span><span class="s1">&#39;Dead&#39;</span><span class="p">]</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">interest</span><span class="p">:</span>
    <span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="s1">&#39;Alive&#39;</span><span class="p">,</span><span class="s1">&#39;Dead&#39;</span><span class="p">],</span><span class="n">Lower</span><span class="p">[</span><span class="n">sub</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Percent&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Lower&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="s1">&#39;Alive&#39;</span><span class="p">,</span><span class="s1">&#39;Dead&#39;</span><span class="p">],</span><span class="n">Inner</span><span class="p">[</span><span class="n">sub</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Inner&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="s1">&#39;Alive&#39;</span><span class="p">,</span><span class="s1">&#39;Dead&#39;</span><span class="p">],</span><span class="n">Upper</span><span class="p">[</span><span class="n">sub</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Upper&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="s1">&#39;Alive&#39;</span><span class="p">,</span><span class="s1">&#39;Dead&#39;</span><span class="p">],</span><span class="n">Outer</span><span class="p">[</span><span class="n">sub</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;purple&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Outer&#39;</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
</pre></div>


<p><img alt="png" src="heart disease files/output_23_0.png"></p>
<p><img alt="png" src="heart disease files/output_23_1.png"></p>
<p><img alt="png" src="heart disease files/output_23_2.png"></p>
<p><img alt="png" src="heart disease files/output_23_3.png"></p>
<p>Each plot contains fifty percent of each column's data. The differences are from whether the data is from below or above the median or inside or outside the 25th and 75th percentiles.  </p>
<p>Serum creatinine had a stronger mortality rate in the middle 50 percent of the data. Ejection fraction, serum sodium, and time all had higher mortality rates with the lower or outer halfs of the data. For time this makes sense because of what was learned from the histogram before.</p>
<div class="highlight"><pre><span></span><span class="n">ejection_sums</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">))</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">):</span> 
        <span class="k">if</span> <span class="n">y</span><span class="o">&gt;=</span><span class="n">x</span><span class="p">:</span>
            <span class="n">ejection_sums</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Death event&#39;</span><span class="p">][(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">]</span><span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">],</span><span class="n">y</span><span class="p">))</span><span class="o">|</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">]</span><span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">))]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ejection_sums</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="mi">96</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">ejection_chart</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">))</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">101</span><span class="p">):</span> 
        <span class="k">if</span> <span class="n">y</span><span class="o">&gt;</span><span class="n">x</span><span class="p">:</span>
            <span class="n">ejection_chart</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">ejection_sums</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">][(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">]</span><span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">],</span><span class="n">y</span><span class="p">))</span><span class="o">|</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">]</span><span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ejection fraction&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">))]</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ejection_chart</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">96</span><span class="o">/</span><span class="mi">299</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">ejection_chart</span><span class="o">=</span><span class="n">ejection_chart</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ejection_chart</span><span class="o">=</span><span class="n">ejection_chart</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">ejection_chart</span><span class="o">.</span><span class="n">index</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">heat</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">ejection_chart</span><span class="p">)</span>
<span class="n">heat</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Mortality Percentage Outside Percentiles&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">heat</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Lower Than Percentile&#39;</span><span class="p">)</span>
<span class="n">heat</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Higher Than Percentile&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p><img alt="png" src="heart disease files/output_28_0.png"></p>
<p>This plot acts as a two-dimensional histogram to see density of deaths by percentile. The numbers on the x-axis denote the lower percentile and y the upper percentile. If you start with 45 on the x-axis and go to 80 on the y-axis it shows that there is a relatively strong rate of death for patients that were lower than the 45th percentile or higher than the 80th percentile for heart ejection percentage.</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">ejection_chart</span><span class="p">[</span><span class="mi">45</span><span class="p">][</span><span class="mi">80</span><span class="p">])</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">.</span><span class="mi">42483660130718953</span>
</pre></div>


<p>These could at least be warning levels for doctors to know that their is a significant probability that their patient may have issues before their next appointment. This graph also shows anything below the 20th percentile should be a giant red flag with death rates of 83 percent.</p>
<div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">ejection_chart</span><span class="p">[</span><span class="mi">19</span><span class="p">][</span><span class="mi">100</span><span class="p">])</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">.</span><span class="mi">8333333333333334</span>
</pre></div>


<p>Overall this was a fun data set to work with. It was fun to play doctor and try to find any information that could be helpful to people.</p>
  </div>
  <div class="tag-cloud">
    <p>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Scott Hohenwater's Data Blog ",
  "url" : "https://shohenwater.github.io",
  "image": "",
  "description": ""
}
</script>


</body>
</html>